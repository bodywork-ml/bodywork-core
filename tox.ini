[tox]
envlist = py39-{unit_and_functional_tests,integration_tests,static_code_analysis}

[testenv]
deps = 
    pytest==6.2.5
    pytest-cov==3.0.0
    flake8==3.9.2
    mypy==0.782
passenv = *
commands = 
    unit_and_functional_tests: pytest tests/unit_and_functional --tb=short --disable-warnings --cov=bodywork --cov-branch --cov-report=xml {posargs}
    integration_tests: pytest tests/integration --tb=short --disable-warnings --cov=bodywork --cov-branch --cov-append --cov-report=xml {posargs}
    static_code_analysis: mypy --config-file mypy.ini
    static_code_analysis: flake8 --config flake8.ini src/bodywork
